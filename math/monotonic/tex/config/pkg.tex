% ==============================
% Geometry & page layout
% ==============================
\usepackage[top=1.25in, lmargin=1.25in, rmargin=1.25in]{geometry}
\usepackage{setspace}         % line spacing
\usepackage[bottom]{footmisc} % footnotes at bottom
\usepackage{indentfirst}      % indent first paragraph
\usepackage{titlesec}
\usepackage{fancyhdr}

% ==============================
% AMS / Math packages
% ==============================
\usepackage{amsmath,amssymb,amsfonts,amsthm,amscd}
\usepackage{mathtools}        % extends amsmath
\usepackage{nccmath}          % additional math environments
\usepackage{nicefrac}         % for inline fractions

% ==============================
% Fonts
% ==============================
\usepackage[T1]{fontenc}
\usepackage[mlmodern]{fontsetup}
\usepackage{mathrsfs}         % math script fonts


% ==============================
% Graphics & Diagrams
% ==============================
\usepackage{graphicx}         % include graphics
\usepackage{tikz}             % general TikZ
\usepackage{tikz-cd}          % commutative diagrams
\usepackage{quiver}           % category-style diagrams

% ==============================
% Hyperlinks / Colors
% ==============================
\usepackage{xcolor}
\definecolor{darkred}{RGB}{128,0,0} % or {HTML}{800000}

\usepackage[
    colorlinks=true,
    linkcolor=darkred,   % affects internal links (sections, eqs, etc.)
    citecolor=darkred,   % citation links
    urlcolor=darkred     % URLs
]{hyperref}

% turn off link color *inside the TOC only*
\usepackage{etoolbox}
\makeatletter
\pretocmd{\tableofcontents}{%
  \hypersetup{linkcolor=black}%
}{}{}
\apptocmd{\tableofcontents}{%
  \hypersetup{linkcolor=darkred}%
}{}{}
\makeatother

% ==============================
% Lists & formatting
% ==============================
\usepackage{enumitem}         % customizable lists
\usepackage{dirtytalk}        % quotations

% ==============================
% Patch / tweaks
% ==============================
\usepackage{xpatch}           % patch existing commands
